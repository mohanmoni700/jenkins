pipeline {
        parameters { string defaultValue: 'hello', name: 'greeting' }

            environment {
                my_name = "Mohan"
            }
            agent none

                stages {
                    stage('first-stage'){
                    agent {
                             label 'slave1'
                    }

                    when {
                        expression{ params.greeting == "hello" }
                    }
                         
                         steps {
                           
                            sh '''
                            echo "this is first stage"
                            sleep 5
                            '''                              
                        }
                    }

                    stage('second-stage'){
                    agent {
                             label 'slave2'
                    }
                    when {
                        expression{ params.greeting == "hi" }
                    }
                        steps {
                            
                            sh '''
                            sleep 5
                            echo "second stage"
                            '''
                        }

                    }
                }

}
